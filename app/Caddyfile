# HTTPS configuration with custom certificates
brainlens.cloud:1443 {
    # Use your own SSL certificates
    tls /etc/ssl/certs/fullchain.pem /etc/ssl/private/privkey.pem
    
    # Serve static frontend files
    root * /srv/client
    encode gzip
    try_files {path} /index.html
    file_server
    
    # Handle API routes
    handle /api/* {
        reverse_proxy app:3001
    }
    
    # Handle auth routes  
    handle /auth/* {
        reverse_proxy app:3001
    }
}

# HTTP redirect to HTTPS
brainlens.cloud:1180 {
    redir https://brainlens.cloud:1443{uri} permanent
}

# If you want separate subdomains (optional)
# api.brainlens.example.com {
#     reverse_proxy app:3001 {
#         health_uri /health
#         health_interval 30s
#         health_timeout 10s
#     }
# }